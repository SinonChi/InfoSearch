mysql-proxy    практическ  идеальн  решен  для  тех  ком  нуж  дешев  шардинг  без  переписыван  приложен  а  такж  хостинг  провайдер  котор  сложн  контролирова  криворук  клиент    но  хотел  бы  вынест  mysql  ил  сниз  нагрузк  на  субд  без  лишн  контакт  с  клиент  итак  ест  задач  облегч  жизн  mysql  сервер  доступн  решен    master-slave  репликац  все  замечательн  когд  у  нас  ест  программист  котор  могут  переписа  приложен  на  использован  нескольк  сервер  субд  но  как  быт  есл  таков  нет  тут  на  помощ  нам  приход  mysql-proxy  работ  прозрачн  для  клиент  mysql-proxy  умеет  проксирова  запрос  нескольк  slave  &  master  сервер  дал  будет  описан  тест  опущ  в  дан  топик  разворачиван  master-slave  репликац  документац  мор  рекоменд  тольк  пропуска  ту  котор  совет  копирова  файл  таблиц  опц  --master-data  в  mysqldump  давн  уж  присутств  итак  был  развернут  master-slave  репликац  с  одн  мастер  и  трем  слейв  задач  провер  оверхед  mysql-proxy  и  поддержк  failover  для  проверк  был  использова  два  скрипт  перв  производ  вставк  1000  строк  в  бд  без  использован  индекс  втор  производ  чтен  таблиц  кэш  исключа  скрипт  запуска  нескольк  раз  брал  средн  значен  производ  нескольк  тест  тест  1    вставк  в  бд  а  напрям  в  бд  результат  берет  за  100    100  б  через  mysql-proxy  один  мастер    69  тест  2    выборк  из  бд  а  напрям  из  бд  результат  берет  за  100    100  б  через  mysql-proxy  тольк  один  слейв    75  тест  3    выборк  из  бд  а  напрям  из  бд  результат  берет  за  100    100  б  через  mysql-proxy  три  слейв  70  тест  4    выборк  из  бд  а  напрям  из  бд  результат  берет  за  100    100  б  через  mysql-proxy  два  из  трех  слейв  был  погаш  для  проверк  failover  8  график  тестов  скрипт  вызыва  ab  -n  1000  -c  1  скрипт  и  ab  -n  1000  -c  10  скрипт  межд  вызов  был  минутн  пауз  отбрасыва  крайн  значен  средн  для  коннект  без  mysql-proxy  брал  за  100  тест  1  провод  скрипт  php  for  i    1  i    1000  i++  {  link    new  mysqlilocalhost  login  pass  base  link-queryinsert  into  test  `set`  mysqli_closelink  }    перед  ег  выполнен  выполня  truncate  тест  2    4  php  for  i    1  i    1000  i++  {  link    new  mysqlilocalhost  login  pass  base  qlink-queryselect    from  `test`  whilerq-fetch_assoc  {  print_rr  }  mysqli_closelink  }    bывод  есл  тест1  вопрос  не  вызыва  а  тест  2  и  3  в  случа  сложн  запрос  и  использован  индекс  будут  совершен  друг  при  реальн  нагрузк  и  тож  понятн  то  результат  тест  4  мен  немн  в  недоумен  ввод  конфиг  mysql-proxy  в  тесте4  cat  etcdefaultmysql-proxy  enabledtrue  options  --proxy-addresslocalhost3309  --proxy-read-only-backend-addressesworkserver13306  --proxy-read-only-backend-addressesdownserver13306  --proxy-read-only-backend-addressesdownserver23306  --proxy-backend-addressesworkserver13306  --proxy-skip-profiling    ваш  мысл  